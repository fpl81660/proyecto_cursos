<div class="container py-5">

  <div class="text-center mb-4">
    <img [src]="auth.currentUser()?.foto_perfil || 'assets/default.webp'" 
         alt="Foto de perfil"
         class="rounded-circle shadow mb-3" 
         width="150" height="150" 
         style="object-fit: cover; border: 4px solid white;">

    <h2 class="fw-bold">{{ auth.currentUser()?.nombre }}</h2>
    <p class="text-muted mb-0">{{ auth.currentUser()?.correo }}</p>
    <p class="text-muted"><i class="bi bi-geo-alt-fill"></i> {{ auth.currentUser()?.pais }}</p>
  </div>

  <div class="card text-center shadow-sm border-0 rounded-3">
    <div class="card-header bg-white">
      <ul class="nav nav-tabs card-header-tabs justify-content-center" id="perfilTabs" role="tablist">
        
        <li class="nav-item" role="presentation">
          <button class="nav-link active fw-bold text-primary" id="cursos-tab" data-bs-toggle="tab" data-bs-target="#cursos" type="button" role="tab">
            Mis Cursos
          </button>
        </li>

        <li class="nav-item" role="presentation">
          <button class="nav-link fw-bold text-primary" id="publicaciones-tab" data-bs-toggle="tab" data-bs-target="#publicaciones" type="button" role="tab">
            Mis Publicaciones
          </button>
        </li>

      </ul>
    </div>

    <div class="card-body text-start p-4 bg-light">
      <div class="tab-content" id="perfilTabsContent">

        <div class="tab-pane fade show active" id="cursos" role="tabpanel">
          <h5 class="card-title mb-3 fw-bold text-dark">Cursos en los que estás inscrito</h5>

          <div class="list-group shadow-sm" *ngIf="misCursos.length > 0; else noCursos">
            <a [routerLink]="['/curso', curso.id]" 
               class="list-group-item list-group-item-action d-flex align-items-center p-3 border-0 mb-1 rounded" 
               *ngFor="let curso of misCursos">
               
               <img [src]="curso.foto || 'assets/default.webp'" 
                    class="rounded me-3" 
                    width="60" height="60" 
                    style="object-fit: cover;">
               
               <div class="flex-grow-1">
                  <div class="fw-bold fs-5">{{ curso.titulo }}</div>
                  <small class="text-muted">{{ curso.descripcion | slice:0:60 }}...</small>
               </div>
               
               <span class="badge bg-primary rounded-pill px-3 py-2">Ver Curso</span>
            </a>
          </div>

          <ng-template #noCursos>
            <div class="text-center py-5">
              <i class="bi bi-book fs-1 text-muted opacity-50"></i>
              <p class="text-muted mt-2">Aún no te has inscrito a ningún curso.</p>
              <a routerLink="/inicio" class="btn btn-outline-primary btn-sm mt-2">Explorar cursos</a>
            </div>
          </ng-template>
        </div>

        <div class="tab-pane fade" id="publicaciones" role="tabpanel">
          <h5 class="card-title mb-3 fw-bold text-dark">Cursos que has creado</h5>
          
          <div class="row g-3" *ngIf="misPublicaciones.length > 0; else noPubs">
             <div class="col-md-6" *ngFor="let pub of misPublicaciones">
                <div class="card h-100 border-0 shadow-sm">
                   <div class="card-body">
                      <div class="d-flex justify-content-between align-items-start mb-2">
                        <h6 class="card-title fw-bold mb-0 text-truncate">{{ pub.titulo }}</h6>
                        <span class="badge bg-success bg-opacity-10 text-success border border-success">Publicado</span>
                      </div>
                      <p class="card-text small text-muted text-truncate">{{ pub.descripcion }}</p>
                      <div class="mt-3">
                        <a [routerLink]="['/curso', pub.id]" class="btn btn-sm btn-outline-secondary w-100">Ver como visitante</a>
                      </div>
                   </div>
                </div>
             </div>
          </div>

          <ng-template #noPubs>
             <div class="text-center py-5">
               <i class="bi bi-cloud-upload fs-1 text-muted opacity-50"></i>
               <p class="text-muted mt-2">No has subido ningún curso todavía.</p>
             </div>
          </ng-template>

          <div class="text-center mt-4 border-top pt-4">
            <p class="text-muted small">¿Quieres enseñar algo nuevo?</p>
            <a routerLink="/subir-cursos" class="btn btn-primary px-4 fw-bold">
              <i class="bi bi-plus-lg me-1"></i> Crear nuevo curso
            </a>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>